<html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="../../style/reset.css">
    <link rel="stylesheet" type="text/css" href="../../style/control.css">
    <link rel="stylesheet" href="../../style/app.css">
    <link rel="Shortcut Icon" href="../../image/logo.ico">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Bootstrap Core CSS -->
    <link href="../../css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../../css/modern-business.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="../../font-awesome-4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <title>动态规划从认识到深入理解</title>
</head>
<body class="body">

     <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar">我们</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="../../index.html">Fiisio's Blog</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    
                    <li>
                        <a href="../essay/list.html">杂文</a>
                    </li>
                    <li>
                        <a href="../technologes/list.html">技术</a>
                    </li>
                    <li>
                        <a href="../server/list.html">服务器开发</a>
                    </li>
                    <li>
                        <a href="../algorithm/list.html">算法和数据结构</a>
                    </li>
                    <li>
                        <a href="../osandcn/list.html">OS&CN知识汇总</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"> 翻译 <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="../translations/bjnetp/list.html">Beej's网络编程指南</a>
                            </li>
                            <li>
                                <a href="#">未定义</a>
                            </li>
                            <li>
                                <a href="#">未定义</a>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"> 编程学习系列<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="../programming/python/list.html">Python学习</a>
                            </li>
                            <li>
                                <a href="../programming/c_learn/list.html">C/C++深入学习</a>
                            </li>
                            <li>
                                <a href="../programming/leetcode/list.html">Leetcode题解</a>
                            </li>
                            <li>
                                <a href="../programming/network/list.html">网络编程</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="../project/list.html">项目</a>
                    </li>
                    <li>
                        <a href="../resume.html">简历</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>


    <div class="blog-item"><div id="" class="shadowbox note-content"><h2 class="note-title">动态规划从认识到深入理解</h2>
<hr>
<p class="note-tags to-remove"><i class="icon-bookmark"></i><code>动态规划</code> <code>面试</code> <code>手写代码</code> <code>最优解</code> </p>
<h3>引言</h3>
<p>     说到动态规划，实在是有点惭愧，当初我对于它的思想纠结了好几个星期，愣是没搞特别清楚，当时我真切的怀疑自己的智商了。所以，题目我都不敢写成从入门到精通，一是因为我讨厌这样的字眼；二是因为面对众多大牛不敢说精通(嘻嘻。。)<br></p>
<p>     动态规划一般只适用于有最优子结构的问题。什么，你问我什么是最优子结构，额，它是说：局部的最优解能够决定整体的最优解，即简单的说就是，将问题划分成最小的单元，每次我们都想法得到最小单元的最优的解，不断的“滚雪球”，并保证“雪球是圆的”——即每增加一部分都是最优的解，直到解决问题本身，那么此时得到的就是最好的答案。</p>
<p>     并且，动态规划必须满足三个要素：
        <font color="blue">1、最优子结构：
            即问题可以分成子问题，并且子问题的解最优最终可以导致问题的解最优。
        2、重叠子问题
            指在自顶向下对问题进行求解时，每次产生的子问题有重复的，这些子问题会被重复计算多次。动态规划算法就是利用了这种子问题的重叠性质，对每一个子问题只计算一次，并将计算结果保存，当再遇到这样的子问题时，取出前面得到的结果即可。
        3、无后效性
            其实前面的两个要素已经决定了这一性质，因为如果有后效性，那么子问题最优并不一定保证问题的最优。无后效性其实是说，当前的解或者元素的组合对后面的求解是没有影响的。</font>
</p>
<h3>分析与解答</h3>
<p>     我们先来看看下面这个题目
        求一个一维数组(N个元素)中的最大子数组之和。
        最直接的方法是直接遍历所有的情况并求和，枚举结果，三个for循环即可，时间复杂度是O(n^3)，优化下最后一个循环可以去掉，可以优化到O(n^2)的复杂度，详细代码在此不再给出。
</p>
<p>     很显然我们不会满足于这种效率的算法，试着想下，如果最大和的序列是{A[i]...A[j]}
    <font color="blue">如果0 = i = j 那么A[0]即是最大子段和
    如果0 = i &lt; j 那么最大子段和即是以A[0]开头的
    如果0 &lt; i 那么最大子段和与A[0]是没有关系的</font>
    从上面的假设我们可以得到想要求得A[0]~A[n]的最大子段和，那么我们要求出A[0]~A[n-1]的最大子段和；想要求得A[0]~A[n-1]的最大子段和，那么我们要求出A[0]~A[n-2]的最大子段和....聪明的你一定会想到，最优子结构决定了最优解。
    <font color="red">nStart = max(array[i],array[i]+nStart)</font>;
</p>
<blockquote>
<pre class="hljs-dark"><code class="hljs javascript"><span class="hljs-string">//动态规划
int max(int x, int y){
    return ((x>y) ? x:y);
}
int Max_Subarray_Dy(const int[] array, int n){
    Start[n-1] = array[n-1];
    All[n-1] = array[n-1];
    //从数组末尾向前遍历，直到数组首
    for(int i = n-2; i >= 0; i--){
        // Start[i] = max(array[i],array[i]+Start[i+1]);
        // All[i] = max(Start[i],All[i+1]);
        nStart = max(array[i],array[i]+nStart);
        nAll = max(Start[i],nAll);
    }
    return nAll;
}
</span></code></pre>
</blockquote>
<p>     上面的例子是一维的动态规划，还是比较好理解的，不过如果是二维的情况应该怎样理解呢？请看下面的这个例子，@July的十五个经典算法中也使用了这个经典的动态规划的例子——LCS问题：最长公共子序列
    题目：如果string1的所有字符按其在字符串中的顺序出现在另外一个string2中， 则string1称之为string2的子串。
    注意，并不要求子串（字符串一）的字符必须连续出现在字符串二中。 请编写一个函数，输入两个字符串，求它们的最长公共子串，并打印出最长公共子串。 例如：输入两个字符串 BDCABA 和 ABCBDAB，字符串 BCBA 和 BDAB 都是是它们的最 长公共子序列，则输出它们的长度 4，并打印任意一个子序列。 
    
     设序列 X=<x1, x2, …, xm>和 Y=<y1, y2, …, yn>的一个最长公共子序列 Z=&lt;z1, z2, …,zk>， 则： 
    若 xm=yn，则 zk=xm=yn且 Zk-1是 Xm-1和 Yn-1的最长公共子序列； 
    若 xm≠yn且 zk≠xm ，则 Z 是 Xm-1和 Y 的最长公共子序列； 
    若 xm≠yn且 zk≠yn ，则 Z 是 X 和 Yn-1的最长公共子序列。 

    其中 Xm-1=<x1, x2, …, xm-1>，Yn-1=&lt;y1, y2, …, yn-1>，Zk-1=&lt;z1, z2, …, zk-1>。 
    在此用 c[i,j] 记录序列 Xi和 Yj的最长公共子序列的长度。其中 Xi=&lt;x1, x2, …, xi>，Yj=&lt;y1, y2, …, yj>。当 i=0 或 j=0 时，空序列是 Xi和 Yj的最长公共子序列，故 c[i,j]=0
    子问题的递归结构：
    <img src="images/dynamic_1.png">

    由此我们可以写出相应的递归算法。如果使用A[i,j]来指示从c[i,j]是由哪一个子问题达到的，那么我们可以看出最长公共子序列的得到路径和过程。
    当 b[i,j]中遇到"↖"时（ 意味着 xi=yi是 LCS的一个元素 ），表示 Xi与 Yj的最长公共 子序列是由 X(i-1)与 Y(j-1)的最长公共子序列在尾部加上 xi得到的子序列;
    当 b[i,j]中遇到"↑"时，表示 Xi与 Yj的最长公共子序列和 Xi-1与 Yj的最长公共子序列 相同;
    当 b[i,j]中遇到"←"时，表示 Xi与 Yj的最长公共子序列和 Xi与 Yj-1的最长公共子序列 相同。 

    其中箭头的方向即是最长公共子序列的路径方向。

    设所给的两个序列为 X=&lt;A，B，C，B，D，A，B>和 Y=&lt;B，D，C，A，B，A>。
    <img src="images/dynamic_2.png"> 

    最后给出该问题的全部代码，代码源自@Julu之十五个经典算法研究动态规划。
</p>
<blockquote>
<pre class="hljs-dark"><code class="hljs javascript"><span class="hljs-string">//7分的代码

</span></code></pre>
</blockquote>
<p>除了上面说的之外，其实还有很多细节问题，例如关于字符串的命名，strDest之类一定是比ab这些好多了，所以，有很多需要注意的。不知道你是否考虑到这些呢？说实话，第一次在网上看到关于这个问题的讨论后，简直自己弱爆了，带着兴奋和膜拜记下了这些，并一直认真阅读。不知道大家什么赶脚......</p>
<p><span float="left"><a href="#">&lt&ltPrev</a></span>                                                                                                                                                                                                     <span float="right"><a href="#">Next&gt&gt</a></span></p>

</div>
  <!-- jQuery Version 1.11.0 -->
    <script src="../../js/jquery-1.11.0.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../../js/bootstrap.min.js"></script>

    <!-- Script to Activate the Carousel -->
    <script>
    $('.carousel').carousel({
        interval: 5000 //changes the speed
    })
    </script>
        <!--兼容版，可保证页面完全兼容-->
<div id="SOHUCS"></div>
<script>
  (function(){
    var appid = 'cyrxhj7os',
    conf = 'prod_34b2ab97462c022b8508b82cbbd8cbbf';
    var doc = document,
    s = doc.createElement('script'),
    h = doc.getElementsByTagName('head')[0] || doc.head || doc.documentElement;
    s.type = 'text/javascript';
    s.charset = 'utf-8';
    s.src =  'http://assets.changyan.sohu.com/upload/changyan.js?conf='+ conf +'&appid=' + appid;
    h.insertBefore(s,h.firstChild);
  })()
</script>

    </div>
</body>
</html>